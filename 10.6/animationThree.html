<!Doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>animation</title>
    <script src="../封装/JS/runStyle.js"></script>
    <style>
        div{
            width: 200px;height: 200px;
            background-color:red;
        }
    </style>
</head>
<body>
<input type="button" value="按钮">
<div></div>


<script>
    /*
    依次设置多个属性
     */

    //匀速运动的公式=已经运动的时间/总时间*运动的距离+初始值


    // function animation(obj,json,duration,callback) {
    //     var time=0;
    //     var t=setInterval(function () {
    //         for (var key in json) {
    //             var attr=key;
    //             var end=json[key];
    //             var start=parseInt(getComputedStyle(obj,null)[attr]);
    //             var change=end-start;
    //             time+=50;
    //             if(time>duration){
    //                 time=duration;
    //                 clearInterval(t);
    //                 obj.style[attr]=end+'px';
    //                 if(callback){
    //                     callback();
    //                 }
    //             }else{
    //                 obj.style[attr]=(time/duration*change+start)+'px';
    //             }
    //         }
    //     },50)//21帧
    //
    //
    // }
    // animation(document.querySelector('div'),{
    //     width:300,
    //     height:300,
    //     margin:100
    // },1000,function () {
    //     animation(document.querySelector('div'),{
    //         width:200,
    //         height:200,
    //         margin:0
    //     },20000)
    // })

    //老师版
    // function animation(obj,json,duration,callback,runStyle){     //定义一个函数 形参分别传入变化的对象/变化的属性和结束值的对象/动画运动的总时间/运行完之后要干什么
    //     var start={};   //定义一个对象,存储所有要变化的属性的初始值
    //     var end={};    //定义一个对象,存储所有要变化的属性的结束值
    //     var change={}; //定义一个对象,存储所有要变化的属性的变化值
    //     for (var i in json) {  //循环遍历json对象
    //         start[i]=parseInt(getComputedStyle(obj,null)[i]);  //将json对象中每一个要变化的属性的初始值赋值给start的每一个
    //         end[i]=json[i];                                   //将json对象中每一个要变化的属性的结束值值赋值给end的每一个
    //         change[i]=end[i]-start[i];                       //将json对象中每一个要变化的属性的变化值值赋值给change的每一个
    //     }
    //     var time=0;                   //定义一个变量time 存储动画运行的时间
    //     var t=setInterval(function () { //定义一个变量t存储定时器
    //         time+=40;                   //定时器每运行一次,运动时间+40
    //         if(time>duration){         //当运行的时间大于动画运动的总时间的时候
    //             time=duration;         //运行的时间等于动画运动的总时间
    //             clearInterval(t);     //清除定时器t
    //             for(var i in json){   //遍历json对象
    //                 obj.style[i]=json[i]+'px';   //当运行的时间大于动画运动的总时间的时候,变化的属性值=json中的对应的值+'px'
    //             }
    //             if(callback){                 //如果函数存在
    //                 callback();               //运行函数
    //             }
    //         }else{//当运行的时间不大于动画运动的总时间的时候
    //             for(var i in json){   // 遍历json对象
    //                 // obj.style[i]=(time/duration*change[i]+start[i])+'px';//变化的属性值=(运动时间/总时间*每一个的变化值+每一个的初始值)+'px'
    //                 obj.style[i]=runStyle(time,start[i],change,duration[i])+'px'
    //                 console.log(runStyle)
    //             }
    //         }
    //     },40) //定时器每经过40ms运行一次
    // }


    animation(document.querySelector('div'),{
        width:300,
        height:300,
        margin:100
    },1000,Tween.Quad.easeOut,function () {
        document.querySelector('div').style.background='green';
    })


</script>
</body>
</html>